start

맥 x 버튼 클릭시 프로그램 종료
- mlx_hook event  에서 ON_DESTROY 코드 17번 사용하면 됨

map의 사이즈는 어떻게 가지고 올까?
- main문에서 읽어오는 map(.ber) 파일에서 문자 하나당 이미지 파일 1개가 들어가므로 가로는 가로문자개수 * 이미지파일가로크기
  세로도 가로와 같이.

이상한 곳에서 오류나면 make fclean 후, 다시 해보자

아 맞다. 맵 파싱할 때 0, 1, C, E, P 이외의 문자가 있으면 오류처리 해줘야 한다. 이거 어떻게 하지?
- 벽에 둘러 쌓여 있는지 확인할 때 가운데 문자열 도니까 그 때 확인하면 될 듯?
- 그냥 get_next_line 함수로 한 줄씩 읽을 때 확인.
- 생각해보니 겟넥라는 개행까지 같이 출력하므로 개행도 예외처리에 같이 넣어줌.
- 개행은 따로 조건문에 넣어서 돌려야하나.... 나중에 다시 보자.

플레이어 OR 코인 OR 출구가 벽에 둘러쌓여 있는건 어떻게 처리할 수 있을까?
- 구조체에 char 포인터 변수를 하나 만들어서 GNL로 읽은 모든 문자열을 strjoin을 이용해 계속 저장한다.
- strjoin도 계속 할당하니까 사용할 때 마다 전에 할당한 거 free해주기
- 그럼 모든 문자열을 다 읽었으면 P, C, E의 개수가 정해지고 예외 처리.
- 구조체에 char 포인터 3개를 만들고 각 각 윗 문자열 가운데 문자열 아래 문자열을 저장한다. 어떻게?
- 함수에서 변수 i를 만들고 i가 height이 될 때까지 돌면
- i % 3 = 0 이면 i 가 0, 3, 6...
- i % 3 = 1 이면 1, 4, 7...
- i % 3 = 2 이면 2, 5, 8....
- 이렇게 윗줄부터 차례대로 넣을 수 있다. 모든 문자를 담은 포인터 변수를 width 만큼 잘라서 넣으면 되겠지?
- ft_substr 함수로 info->width 를 len으로 넣어서 잘랐다, 즉 개행 전까지
- 3줄 가지고 오면 가운데 문자열 1번 째 인덱스부터 width - 2 까지 돌면서(어차피 0, width - 1은 벽일테니까)
- 양 옆, 위, 아래에 1이 있는지 확인 (플레이어,코인,출구 다 해야 하므로 함수만들 때 파라미터로 구조체 받게 하기)
- 처음 구현은 모든 문자 다 돌면서 했는데 굳이 다 돌 필요없이 C, P, E요 3가지가 있으면 그 위치를 인덱스로 받고
- 확인해보게 구현해보면 될 듯?
- 생각해보니 한 포인터 변수에 다 넣지 말고 문자여 다 돌면서 한줄 한줄 읽을 때 처리되는 오류를 제외하고는 다 읽은 다음 width, height이 정해지면 width, height을 이용한 2차원 배열을 만들어서 다시 처음부터 읽으면서 문자열을 2차원 배열에 넣어주는 건 어떨까?
- 뭐가 더 좋은 방법일까? 첫번째 방법은 문자열을 한번만 읽고, 읽은 문자열을 다시 분리하는 작업이 필요하고, 두번째 방법은 문자열을 총 두번을 읽는 대신, 문자열을 분리하는 작업이 필요하지 않으니 구현은 좀 더 간단할지도?? 첫번째 방법은 upper, middle, lower str에서 처음 할당하고 문자열 넣는 작업은 문제가 없었는데 두번째 할당 때는 middle -> upper, lower->middler 에 문자열을 넣고 lower만 새로운 문자열을 받는 작업을 구현하는게 잘안되고 있는 문제점이 있다. 

- 벽으로 둘러쌓였있는 경우 문자열 한 줄에 코인이 한 개 이상일 때 첫번째 코인을 찾아서 확인 후 두번 째 코인으로 이동하는 걸 구현하는게 힘들었음. 
- 마지막 줄 다음을 읽으면 오류가 발생할 수 있으니, i 가 height - 1 이 되면 깔끔하게 종료되게 만들어보자.

이러면 마지막 문자열 따로 저장할 필요가 있을까?
- 위에서 만든 함수에서 i 가 height - 1 될 때 문자열을 따로 받아서 벽인지 체크를 먼저 해야겠다.

이미지는 어떻게 파싱하지?
- 맵 파싱 에러처리 한 후 width 와 height * 64(이미지 크기) 만큼 동적 할당 후 모든 문자열 저장한 포인터에서 width -1 만큼 가져와서 문자에 맞는 이미지 불러오기?
- 이동했을 때는 이미지 어떻게 바꾸지?
- 해당하는 문자를 바꿔줘야 하나? 만약 바꾸면 어떻게 바꿔야 하지?
- 일단 맵 파싱 먼저 끝내보


읽은 파일이 빈파일이면 겟넥라의 반환값은??
- NULL 이어서 따로 예외 처리 해줬다.

만약 파일에 개행만 있다면?
- 에러에 걸린다.

겟넥라에서 읽은 값에서 개행만 제거하고 넣을 수 있나?
- 그냥 제거 안했다.

아직도 포인터에 대한 개념이 부족한 것 같다.
char *tmp = "123456"
char *a = (char *)malloc(sizeof(char) * strlen(tmp) + 1);
a = tmp;
free(tmp);
이렇게 하면 a에 tmp의 값이 복사가 될 줄 알았다.
우분투에서는 위와 같이 하면 a를 출력 시 tmp를 free 했으니 이상한 값이 출력되고,
맥 OS에서는 정상 출력 됬던 것 같다. 
하지만 a = tmp 시 a 에 tmp의 주소가 복사가 되고, 즉 malloc으로 할당한 주소가 사라지고 tmp의 주소가 복사가 된다(큰 착각이었다). free(tmp)했을 경우 tmp의 값이 사라지고 a 에는 tmp의 주소가 그대로 있으니 a를 출력하면 tmp의 주소를 역참조 해서 해당 값을 출력하게 되므로 사라진 값이 출력이 된다.
따라서 a에 tmp의 값을 복사하고 싶으면 strcat등 함수를 이용해 말록으로 할당된 주소에 데이터 하나 하나를 복사하는 방식으로 접근해야 한다. 아직 멀었다 아아아아아.

- 맵 파싱하는 부분은 끝났고 이제 들어오는 맵에 따라 이미지를 디스플레이에 출력하는 과정을 수도코딩해보자.
- info_init함수에서 info->mlx = mlx_init()으로 클라이언트와 디스플레이 연결시키고
- info->new_window = mlx_new_window(info->mlx, info->width, info->height, "so_long")으로 디스플레이에 새로운 윈도우를 띄운다.
- 그리고 info->all_str의 2차원배열의 첫줄부터 읽으면서 이미지를 파싱하는 함수를 만든다.
```
int i = 0;
int j = 0;
while (i < info->height)
{
  while (info->all_str[i] != '\n')
  {
    if (all_str[i][j] == '1')
      벽 출력
    else if (all_str[i][j] == '0')
      땅 출력
    else if (all_str[i][j] == 'P')
      플레이어 출력
    else if (all_str[i][j] == 'C')
      코인 출력
    else if (all_str[i][j] == 'E')
      출구 출력
     j++
    }
   i++
 }
 ```
 -  그 다음 wasd를 눌렀을 때 적절히 움직이는 것 구현
 -  추가로 벽을 향해 움직이면 움직이지 않고, 수집품을 다 먹고 출구를 가면 클리어 하는 것 구현
 -  움직일 때마다 이미지를 다시 띄워주면서 자연스럽게 움직이도록 만들면 된다.

# 이동 구현
- 플레이어 위치를 찾아서 w, a, s, d 키를 누르면 해당 문자가 1이면 카운트 X, C 면 코인 카운트-- 
- 해당 문자가 1이면 이동안되니 이미지 바꿈 X
- 해당 문자가 C면 이미지 바꾸고 원래 플레이어 있던 위치 0으로 바꾸기
- C가 0이고 플레이어가 이동한 위치의 문자가 E면 끝났다는 문자출력과 함께 게임종료해야하나?
- 걸음 수 카운트 해야된다. 다만 벽으로 계속 이동하면 카운트 X